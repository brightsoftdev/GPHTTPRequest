//
//  Reachability.h
//  GPHTTPRequest
//
//  Created by Dalton Cherry on 6/28/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <Foundation/Foundation.h>
#import <SystemConfiguration/SystemConfiguration.h>

typedef enum {
	NotReachable = 0,
	ReachableViaWiFi,
	ReachableViaWWAN
} NetworkStatus;

#define kReachabilityChangedNotification @"kNetworkReachabilityChangedNotification"

@class GPReachability;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
@protocol GPReachabilityDelegate <NSObject>

//notifies the delegates that the reachabilityChanged state changed
-(void)reachabilityChanged:(GPReachability*)reach;

@end
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
@interface GPReachability : NSObject
{
    BOOL localWiFiRef;
	SCNetworkReachabilityRef reachabilityRef;
    NSMutableArray* delegates;
    NSThread* notiferThread;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Start listening for reachability notifications on the current run loop
-(BOOL)startNotifier;
-(void)stopNotifier;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//multi cast delegate so you can have multi objects notified that reach state changed
-(void)addListener:(id<GPReachabilityDelegate>)object;
-(void)removeLister:(id)object;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (NetworkStatus)currentReachabilityStatus;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//factory methods
//this only does host like google.com not a specific URL like google.com/index.html Do a head request for that
+(GPReachability*)reachableWithHost:(NSString*)host;
+(GPReachability*)reachableWithWan;
+(GPReachability*)reachableWithLan;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//creates a static object that is designed to be used for checking internet state
+(GPReachability*)sharedNotifer;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//returns of local wifi is available 
+(BOOL)isLanReachable;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//returns of WAN is available 
+(BOOL)isWanReachable;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//returns if remote host is available
+(BOOL)isHostReachable:(NSString*)host;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
@end
